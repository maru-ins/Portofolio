adb shell
su
resetprop ro.bootmode usbradio
resetprop ro.build.type userdebug
setprop sys.usb.config diag,diag_mdm,adb
diag_mdlog
cancel (ctrl+c) once it starts to "hang" at failed to open diag socket
change usb config (file transfer, no file transfer)
wait
open qpst


